<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello</title>
    <script src="http://cdn.socket.io/socket.io-1.4.5.js"></script>
</head>

<canvas id="ctx" width="500" height="500" style="border: solid 1px"></canvas>

Helllo
<script>

    var ctx= document.getElementById("ctx").getContext("2d");
    ctx.font='30px Arial';
    //ctx.color='red';
    var socket =io();

    socket.on('newPosition',function (data) {
        console.log('Update Position ');
        ctx.clearRect(0,0,500,500);
        for(var i=0;i<data.length;i++)
            ctx.fillText(data[i].number,data[i].x,data[i].y);
    });

    document.onkeydown= function (event) {
        switch (event.keyCode){
            //d
            case 68:{
                socket.emit('keypress', {
                    inputId:'right',
                    state:true
                });
            }
            //s
            case 83:{
                socket.emit('keypress', {
                    inputId:'down',
                    state:true
                });
            }
            //a
            case 65:{
                socket.emit('keypress', {
                    inputId:'left',
                    state:true
                });
            }
            //w
            case 87:{
                socket.emit('keypress', {
                    inputId:'up',
                    state:true
                });
            }

        }

    }

    document.onkeyup= function (event) {
        switch (event.keyCode){
            //d
            case 68:{
                socket.emit('keypress', {
                    inputId:'right',
                    state:false
                });
            }
            //s
            case 83:{
                socket.emit('keypress', {
                    inputId:'down',
                    state:false
                });
            }
            //a
            case 65:{
                socket.emit('keypress', {
                    inputId:'left',
                    state:false
                });
            }
            //w
            case 87:{
                socket.emit('keypress', {
                    inputId:'up',
                    state:false
                });
            }

        }

    }
</script>


</html>